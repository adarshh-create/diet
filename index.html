<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriPlan - Your Personal Diet Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.9);
            font-weight: 300;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 15px 30px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            border-color: #4facfe;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.4);
        }

        .section {
            display: none;
            animation: fadeIn 0.8s ease;
        }

        .section.active {
            display: block;
        }

        .card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(0,0,0,0.15);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 1.1rem;
        }

        .form-control {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.8);
        }

        .form-control:focus {
            outline: none;
            border-color: #4facfe;
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
            transform: translateY(-1px);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(79, 172, 254, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .diet-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .diet-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .diet-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(79, 172, 254, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s;
            opacity: 0;
        }

        .diet-card:hover::before {
            opacity: 1;
            top: -100%;
            left: -100%;
        }

        .diet-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        .diet-card.selected {
            border-color: #4facfe;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            transform: translateY(-5px);
        }

        .diet-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .diet-card p {
            font-size: 1rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        .weekly-plan {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .day-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #4facfe;
            transition: all 0.3s ease;
            position: relative;
        }

        .day-card:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .day-card h4 {
            color: #4facfe;
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .meal {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(79, 172, 254, 0.05);
            border-radius: 10px;
            border-left: 3px solid #4facfe;
        }

        .meal h5 {
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .meal p {
            color: #666;
            line-height: 1.4;
            margin-bottom: 5px;
        }

        .calories {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 5px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .calc-btn {
            padding: 20px;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .calc-btn.operator {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
        }

        .calc-btn.equals {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .calc-display {
            grid-column: span 4;
            padding: 20px;
            background: rgba(0,0,0,0.05);
            border-radius: 12px;
            text-align: right;
            font-size: 2rem;
            font-weight: 600;
            color: #333;
            border: 2px solid #e1e5e9;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #4facfe;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1rem;
            color: #666;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0,0,0,0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            border-radius: 5px;
            transition: width 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .nav-tab {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .calculator-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
            
            .calc-btn {
                padding: 15px 10px;
                font-size: 1rem;
            }
        }

        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 20s infinite linear;
        }

        .shape:nth-child(1) {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            top: 60%;
            left: 80%;
            animation-delay: 5s;
        }

        .shape:nth-child(3) {
            top: 80%;
            left: 20%;
            animation-delay: 10s;
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
            100% { transform: translateY(0px) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="floating-shapes">
        <div class="shape" style="width: 100px; height: 100px; background: linear-gradient(135deg, #4facfe, #00f2fe); border-radius: 50%;"></div>
        <div class="shape" style="width: 150px; height: 150px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 30%;"></div>
        <div class="shape" style="width: 80px; height: 80px; background: linear-gradient(135deg, #ffeaa7, #fab1a0); border-radius: 40%;"></div>
    </div>

    <div class="app-container">
        <div class="header">
            <h1>üçé NutriPlan</h1>
            <p>Your Personal Diet & Fitness Assistant</p>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showSection('profile')">üìä Profile Setup</div>
            <div class="nav-tab" onclick="showSection('diet-plan')">ü•ó Diet Plans</div>
            <div class="nav-tab" onclick="showSection('weekly')">üìÖ Weekly Plan</div>
            <div class="nav-tab" onclick="showSection('calculator')">üßÆ Calculator</div>
            <div class="nav-tab" onclick="showSection('tracker')">üìà Progress</div>
        </div>

        <!-- Profile Setup Section -->
        <div id="profile" class="section active">
            <div class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">üë§ Profile Setup</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div>
                        <div class="form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" class="form-control" placeholder="Enter your name">
                        </div>
                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" class="form-control" placeholder="Enter your age">
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" class="form-control">
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="height">Height (cm)</label>
                            <input type="number" id="height" class="form-control" placeholder="Enter height in cm">
                        </div>
                        <div class="form-group">
                            <label for="weight">Current Weight (kg)</label>
                            <input type="number" id="weight" class="form-control" placeholder="Enter current weight">
                        </div>
                        <div class="form-group">
                            <label for="activity">Activity Level</label>
                            <select id="activity" class="form-control">
                                <option value="">Select Activity Level</option>
                                <option value="sedentary">Sedentary (little/no exercise)</option>
                                <option value="light">Light (light exercise 1-3 days/week)</option>
                                <option value="moderate">Moderate (moderate exercise 3-5 days/week)</option>
                                <option value="active">Active (hard exercise 6-7 days/week)</option>
                                <option value="very-active">Very Active (very hard exercise, physical job)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="calculateBMR()" style="margin-top: 20px;">Calculate My Requirements</button>
                
                <div id="bmr-results" style="display: none; margin-top: 30px;">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="bmi-value">0</div>
                            <div class="stat-label">BMI</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="bmr-value">0</div>
                            <div class="stat-label">BMR (kcal/day)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="tdee-value">0</div>
                            <div class="stat-label">TDEE (kcal/day)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="category">Normal</div>
                            <div class="stat-label">Body Category</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diet Plans Section -->
        <div id="diet-plan" class="section">
            <div class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">üéØ Choose Your Goal</h2>
                <div class="diet-options">
                    <div class="diet-card" onclick="selectGoal('weight-loss')">
                        <h3>üî• Weight Loss</h3>
                        <p>Burn calories and lose weight with balanced nutrition</p>
                    </div>
                    <div class="diet-card" onclick="selectGoal('weight-gain')">
                        <h3>üí™ Weight Gain</h3>
                        <p>Build muscle and gain healthy weight</p>
                    </div>
                    <div class="diet-card" onclick="selectGoal('maintenance')">
                        <h3>‚öñÔ∏è Maintenance</h3>
                        <p>Maintain current weight with balanced diet</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">ü•¨ Diet Preference</h2>
                <div class="diet-options">
                    <div class="diet-card" onclick="selectDiet('vegetarian')">
                        <h3>üå± Vegetarian</h3>
                        <p>Plant-based meals with dairy and eggs</p>
                    </div>
                    <div class="diet-card" onclick="selectDiet('non-vegetarian')">
                        <h3>üçó Non-Vegetarian</h3>
                        <p>Balanced meals including meat and seafood</p>
                    </div>
                </div>
            </div>

            <div id="diet-recommendations" style="display: none;" class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">üìã Your Recommended Plan</h2>
                <div id="diet-content"></div>
                <button class="btn btn-secondary" onclick="generateWeeklyPlan()" style="margin-top: 20px;">Generate Weekly Plan</button>
            </div>
        </div>

        <!-- Weekly Plan Section -->
        <div id="weekly" class="section">
            <div class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">üìÖ 7-Day Meal Plan</h2>
                <div id="weekly-plan-content">
                    <p style="text-align: center; color: #666; font-size: 1.2rem; padding: 40px;">
                        Please complete your profile and select your diet preferences to generate a personalized weekly plan.
                    </p>
                </div>
            </div>
        </div>

        <!-- Calculator Section -->
        <div id="calculator" class="section">
            <div class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">üßÆ Calorie Calculator</h2>
                <div class="calc-display" id="calc-display">0</div>
                <div class="calculator-grid">
                    <button class="calc-btn" onclick="clearCalculator()">C</button>
                    <button class="calc-btn" onclick="deleteLast()">‚å´</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('/')">/</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('*')">√ó</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('7')">7</button>
                    <button class="calc-btn" onclick="appendToDisplay('8')">8</button>
                    <button class="calc-btn" onclick="appendToDisplay('9')">9</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('-')">-</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('4')">4</button>
                    <button class="calc-btn" onclick="appendToDisplay('5')">5</button>
                    <button class="calc-btn" onclick="appendToDisplay('6')">6</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('+')">+</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('1')">1</button>
                    <button class="calc-btn" onclick="appendToDisplay('2')">2</button>
                    <button class="calc-btn" onclick="appendToDisplay('3')">3</button>
                    <button class="calc-btn equals" onclick="calculateResult()" style="grid-row: span 2;">=</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('0')" style="grid-column: span 2;">0</button>
                    <button class="calc-btn" onclick="appendToDisplay('.')">.</button>
                </div>
            </div>
        </div>

        <!-- Progress Tracker Section -->
        <div id="tracker" class="section">
            <div class="card">
                <h2 style="margin-bottom: 30px; color: #333; font-weight: 700; font-size: 2rem;">üìà Progress Tracker</h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div>
                        <div class="form-group">
                            <label for="current-weight">Current Weight (kg)</label>
                            <input type="number" id="current-weight" class="form-control" placeholder="Enter current weight">
                        </div>
                        <div class="form-group">
                            <label for="target-weight">Target Weight (kg)</label>
                            <input type="number" id="target-weight" class="form-control" placeholder="Enter target weight">
                        </div>
                        <button class="btn btn-primary" onclick="updateProgress()">Update Progress</button>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label for="calories-consumed">Calories Consumed Today</label>
                            <input type="number" id="calories-consumed" class="form-control" placeholder="Enter calories consumed">
                        </div>
                        <div class="form-group">
                            <label for="calories-burned">Calories Burned (Exercise)</label>
                            <input type="number" id="calories-burned" class="form-control" placeholder="Enter calories burned">
                        </div>
                        <button class="btn btn-secondary" onclick="logCalories()">Log Today's Calories</button>
                    </div>
                </div>

                <div id="progress-stats" style="margin-top: 40px;">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="weight-progress">0</div>
                            <div class="stat-label">Weight Change (kg)</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="weight-progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="calorie-balance">0</div>
                            <div class="stat-label">Calorie Balance</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="calorie-progress-bar" style="width: 50%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="days-tracked">0</div>
                            <div class="stat-label">Days Tracked</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="goal-progress">0%</div>
                            <div class="stat-label">Goal Progress</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="goal-progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let userProfile = {};
        let selectedGoal = '';
        let selectedDiet = '';
        let weeklyPlan = [];
        let progressData = {
            startWeight: 0,
            currentWeight: 0,
            targetWeight: 0,
            daysTracked: 0,
            totalCaloriesConsumed: 0,
            totalCaloriesBurned: 0
        };

        // Diet plans data with detailed meal plans
        const dietPlans = {
            'weight-loss': {
                vegetarian: {
                    dailyCalories: -500,
                    description: "Calorie deficit plan with nutrient-rich vegetarian meals",
                    meals: {
                        breakfast: ["Oats with berries and almonds", "Greek yogurt with nuts", "Vegetable poha", "Quinoa breakfast bowl"],
                        lunch: ["Lentil salad with vegetables", "Quinoa and chickpea bowl", "Vegetable soup with whole grain bread", "Grilled paneer with salad"],
                        dinner: ["Grilled vegetables with tofu", "Lentil curry with brown rice", "Vegetable stir-fry", "Chickpea salad"],
                        snacks: ["Mixed nuts (10-15)", "Apple with peanut butter", "Carrot sticks with hummus", "Green tea"]
                    }
                },
                'non-vegetarian': {
                    dailyCalories: -500,
                    description: "Calorie deficit plan with lean proteins and balanced nutrition",
                    meals: {
                        breakfast: ["Egg white omelet with vegetables", "Grilled chicken with avocado", "Protein smoothie", "Boiled eggs with whole grain toast"],
                        lunch: ["Grilled chicken salad", "Fish with quinoa", "Turkey wrap with vegetables", "Chicken soup with vegetables"],
                        dinner: ["Grilled salmon with vegetables", "Chicken breast with sweet potato", "Fish curry with brown rice", "Lean beef with salad"],
                        snacks: ["Greek yogurt", "Handful of almonds", "Boiled egg", "Protein bar"]
                    }
                }
            },
            'weight-gain': {
                vegetarian: {
                    dailyCalories: 500,
                    description: "Calorie surplus plan with protein-rich vegetarian meals for healthy weight gain",
                    meals: {
                        breakfast: ["Banana pancakes with nuts", "Oatmeal with dried fruits and honey", "Avocado toast with seeds", "Protein smoothie with banana"],
                        lunch: ["Chickpea curry with rice", "Paneer butter masala with naan", "Lentil dal with ghee and rice", "Quinoa bowl with nuts"],
                        dinner: ["Stuffed paratha with yogurt", "Vegetable biryani", "Paneer tikka with rice", "Mixed dal with bread"],
                        snacks: ["Nuts and dried fruits", "Milkshake", "Cheese sandwich", "Energy balls"]
                    }
                },
                'non-vegetarian': {
                    dailyCalories: 500,
                    description: "Calorie surplus plan with high-protein meals for muscle building",
                    meals: {
                        breakfast: ["Scrambled eggs with cheese", "Chicken sausage with bread", "Protein pancakes", "Omelette with meat"],
                        lunch: ["Chicken biryani", "Fish curry with rice", "Mutton curry with bread", "Grilled chicken with quinoa"],
                        dinner: ["Beef steak with potatoes", "Chicken tikka with rice", "Fish fry with bread", "Lamb curry with rice"],
                        snacks: ["Protein shake", "Chicken sandwich", "Boiled eggs", "Tuna salad"]
                    }
                }
            },
            'maintenance': {
                vegetarian: {
                    dailyCalories: 0,
                    description: "Balanced vegetarian meals to maintain current weight",
                    meals: {
                        breakfast: ["Whole grain cereal with milk", "Vegetable upma", "Oats with fruits", "Sprouted grain salad"],
                        lunch: ["Dal rice with vegetables", "Chapati with sabzi", "Vegetable pulao", "Quinoa salad"],
                        dinner: ["Light vegetable curry with rice", "Soup with bread", "Grilled vegetables", "Lentil soup"],
                        snacks: ["Fresh fruits", "Buttermilk", "Roasted seeds", "Herbal tea"]
                    }
                },
                'non-vegetarian': {
                    dailyCalories: 0,
                    description: "Balanced meals with lean proteins to maintain current weight",
                    meals: {
                        breakfast: ["Boiled eggs with toast", "Chicken porridge", "Fish with bread", "Egg sandwich"],
                        lunch: ["Chicken curry with rice", "Fish with vegetables", "Meat soup", "Grilled chicken salad"],
                        dinner: ["Light fish curry", "Chicken soup", "Grilled meat with salad", "Steamed fish"],
                        snacks: ["Yogurt", "Nuts", "Fresh fruits", "Green tea"]
                    }
                }
            }
        };

        // Navigation function
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Hide all nav tabs active state
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Activate selected nav tab
            event.target.classList.add('active');
        }

        // BMR and calorie calculation
        function calculateBMR() {
            const name = document.getElementById('name').value;
            const age = parseInt(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const height = parseInt(document.getElementById('height').value);
            const weight = parseInt(document.getElementById('weight').value);
            const activity = document.getElementById('activity').value;

            if (!name || !age || !gender || !height || !weight || !activity) {
                alert('Please fill in all fields!');
                return;
            }

            // Store user profile
            userProfile = { name, age, gender, height, weight, activity };

            // Calculate BMR using Mifflin-St Jeor Equation
            let bmr;
            if (gender === 'male') {
                bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }

            // Activity multipliers
            const activityMultipliers = {
                'sedentary': 1.2,
                'light': 1.375,
                'moderate': 1.55,
                'active': 1.725,
                'very-active': 1.9
            };

            const tdee = bmr * activityMultipliers[activity];

            // Calculate BMI
            const bmi = weight / ((height / 100) ** 2);
            
            // Determine body category
            let category;
            if (bmi < 18.5) category = 'Underweight';
            else if (bmi < 25) category = 'Normal';
            else if (bmi < 30) category = 'Overweight';
            else category = 'Obese';

            // Update display
            document.getElementById('bmi-value').textContent = bmi.toFixed(1);
            document.getElementById('bmr-value').textContent = Math.round(bmr);
            document.getElementById('tdee-value').textContent = Math.round(tdee);
            document.getElementById('category').textContent = category;
            document.getElementById('bmr-results').style.display = 'block';

            // Store calculated values
            userProfile.bmr = bmr;
            userProfile.tdee = tdee;
            userProfile.bmi = bmi;
            userProfile.category = category;

            // Initialize progress data
            progressData.startWeight = weight;
            progressData.currentWeight = weight;

            // Add animation
            document.getElementById('bmr-results').style.animation = 'fadeIn 0.8s ease';
        }

        // Goal selection
        function selectGoal(goal) {
            selectedGoal = goal;
            
            // Remove active class from all goal cards
            document.querySelectorAll('#diet-plan .diet-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add active class to selected card
            event.target.classList.add('selected');
            
            updateDietRecommendations();
        }

        // Diet preference selection
        function selectDiet(diet) {
            selectedDiet = diet;
            
            // Remove active class from all diet cards
            document.querySelectorAll('#diet-plan .diet-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add active class to selected card
            event.target.classList.add('selected');
            
            updateDietRecommendations();
        }

        // Update diet recommendations
        function updateDietRecommendations() {
            if (selectedGoal && selectedDiet && userProfile.tdee) {
                const plan = dietPlans[selectedGoal][selectedDiet];
                const targetCalories = Math.round(userProfile.tdee + plan.dailyCalories);
                
                const content = `
                    <div style="background: linear-gradient(135deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1)); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <h3 style="color: #4facfe; margin-bottom: 15px; font-weight: 700;">üìä Your Daily Requirements</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: 800; color: #4facfe;">${targetCalories}</div>
                                <div style="color: #666;">Target Calories/Day</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: 800; color: #667eea;">${Math.round(targetCalories * 0.25 / 4)}g</div>
                                <div style="color: #666;">Protein Goal</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: 800; color: #764ba2;">${Math.round(targetCalories * 0.5 / 4)}g</div>
                                <div style="color: #666;">Carbs Goal</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 15px; border-left: 5px solid #4facfe;">
                        <h4 style="color: #333; margin-bottom: 15px; font-weight: 600;">üéØ ${selectedGoal.replace('-', ' ').toUpperCase()} | ${selectedDiet.replace('-', ' ').toUpperCase()}</h4>
                        <p style="color: #666; line-height: 1.6; margin-bottom: 20px; font-size: 1.1rem;">${plan.description}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="background: rgba(79, 172, 254, 0.05); padding: 15px; border-radius: 10px;">
                                <h5 style="color: #4facfe; margin-bottom: 10px;">üåÖ Breakfast Options</h5>
                                ${plan.meals.breakfast.map(meal => `<p style="margin: 5px 0; color: #555;">‚Ä¢ ${meal}</p>`).join('')}
                            </div>
                            <div style="background: rgba(102, 126, 234, 0.05); padding: 15px; border-radius: 10px;">
                                <h5 style="color: #667eea; margin-bottom: 10px;">‚òÄÔ∏è Lunch Options</h5>
                                ${plan.meals.lunch.map(meal => `<p style="margin: 5px 0; color: #555;">‚Ä¢ ${meal}</p>`).join('')}
                            </div>
                            <div style="background: rgba(118, 75, 162, 0.05); padding: 15px; border-radius: 10px;">
                                <h5 style="color: #764ba2; margin-bottom: 10px;">üåô Dinner Options</h5>
                                ${plan.meals.dinner.map(meal => `<p style="margin: 5px 0; color: #555;">‚Ä¢ ${meal}</p>`).join('')}
                            </div>
                            <div style="background: rgba(0, 242, 254, 0.05); padding: 15px; border-radius: 10px;">
                                <h5 style="color: #00f2fe; margin-bottom: 10px;">üçé Snack Options</h5>
                                ${plan.meals.snacks.map(meal => `<p style="margin: 5px 0; color: #555;">‚Ä¢ ${meal}</p>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('diet-content').innerHTML = content;
                document.getElementById('diet-recommendations').style.display = 'block';
                document.getElementById('diet-recommendations').style.animation = 'fadeIn 0.8s ease';
            }
        }

        // Generate weekly plan
        function generateWeeklyPlan() {
            if (!selectedGoal || !selectedDiet || !userProfile.tdee) {
                alert('Please complete your profile and select diet preferences first!');
                return;
            }

            const plan = dietPlans[selectedGoal][selectedDiet];
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const targetCalories = Math.round(userProfile.tdee + plan.dailyCalories);
            
            let weeklyContent = '<div class="weekly-plan">';
            
            days.forEach((day, index) => {
                const breakfastCalories = Math.round(targetCalories * 0.25);
                const lunchCalories = Math.round(targetCalories * 0.35);
                const dinnerCalories = Math.round(targetCalories * 0.3);
                const snackCalories = Math.round(targetCalories * 0.1);
                
                weeklyContent += `
                    <div class="day-card">
                        <h4>${day}</h4>
                        
                        <div class="meal">
                            <h5>üåÖ Breakfast</h5>
                            <p>${plan.meals.breakfast[index % plan.meals.breakfast.length]}</p>
                            <div class="calories">${breakfastCalories} kcal</div>
                        </div>
                        
                        <div class="meal">
                            <h5>‚òÄÔ∏è Lunch</h5>
                            <p>${plan.meals.lunch[index % plan.meals.lunch.length]}</p>
                            <div class="calories">${lunchCalories} kcal</div>
                        </div>
                        
                        <div class="meal">
                            <h5>üåô Dinner</h5>
                            <p>${plan.meals.dinner[index % plan.meals.dinner.length]}</p>
                            <div class="calories">${dinnerCalories} kcal</div>
                        </div>
                        
                        <div class="meal">
                            <h5>üçé Snacks</h5>
                            <p>${plan.meals.snacks[index % plan.meals.snacks.length]}</p>
                            <div class="calories">${snackCalories} kcal</div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 15px; padding: 10px; background: linear-gradient(135deg, #4facfe, #00f2fe); color: white; border-radius: 10px; font-weight: 600;">
                            Total: ${targetCalories} kcal
                        </div>
                    </div>
                `;
            });
            
            weeklyContent += '</div>';
            
            document.getElementById('weekly-plan-content').innerHTML = weeklyContent;
            
            // Auto-switch to weekly tab
            showSection('weekly');
            document.querySelector('[onclick="showSection(\'weekly\')"]').classList.add('active');
        }

        // Calculator functions
        let calcDisplay = '0';
        let previousValue = null;
        let operation = null;
        let waitingForNewValue = false;

        function updateCalculatorDisplay() {
            document.getElementById('calc-display').textContent = calcDisplay;
        }

        function appendToDisplay(value) {
            if (waitingForNewValue) {
                calcDisplay = value;
                waitingForNewValue = false;
            } else {
                calcDisplay = calcDisplay === '0' ? value : calcDisplay + value;
            }
            updateCalculatorDisplay();
        }

        function clearCalculator() {
            calcDisplay = '0';
            previousValue = null;
            operation = null;
            waitingForNewValue = false;
            updateCalculatorDisplay();
        }

        function deleteLast() {
            calcDisplay = calcDisplay.length > 1 ? calcDisplay.slice(0, -1) : '0';
            updateCalculatorDisplay();
        }

        function calculateResult() {
            const current = parseFloat(calcDisplay);
            
            if (previousValue !== null && operation !== null) {
                let result;
                switch (operation) {
                    case '+':
                        result = previousValue + current;
                        break;
                    case '-':
                        result = previousValue - current;
                        break;
                    case '*':
                        result = previousValue * current;
                        break;
                    case '/':
                        result = current !== 0 ? previousValue / current : 0;
                        break;
                    default:
                        return;
                }
                
                calcDisplay = result.toString();
                updateCalculatorDisplay();
                
                // Add visual feedback
                document.getElementById('calc-display').style.animation = 'pulse 0.3s ease';
                setTimeout(() => {
                    document.getElementById('calc-display').style.animation = '';
                }, 300);
            }
            
            previousValue = null;
            operation = null;
            waitingForNewValue = true;
        }

        // Progress tracking functions
        function updateProgress() {
            const currentWeight = parseFloat(document.getElementById('current-weight').value);
            const targetWeight = parseFloat(document.getElementById('target-weight').value);
            
            if (!currentWeight || !targetWeight) {
                alert('Please enter both current and target weight!');
                return;
            }
            
            if (!progressData.startWeight) {
                progressData.startWeight = currentWeight;
            }
            
            progressData.currentWeight = currentWeight;
            progressData.targetWeight = targetWeight;
            
            updateProgressDisplay();
        }

        function logCalories() {
            const consumed = parseFloat(document.getElementById('calories-consumed').value);
            const burned = parseFloat(document.getElementById('calories-burned').value);
            
            if (!consumed && !burned) {
                alert('Please enter calories consumed or burned!');
                return;
            }
            
            progressData.totalCaloriesConsumed += consumed || 0;
            progressData.totalCaloriesBurned += burned || 0;
            progressData.daysTracked += 1;
            
            updateProgressDisplay();
            
            // Clear inputs
            document.getElementById('calories-consumed').value = '';
            document.getElementById('calories-burned').value = '';
        }

        function updateProgressDisplay() {
            const weightChange = progressData.currentWeight - progressData.startWeight;
            const targetChange = progressData.targetWeight - progressData.startWeight;
            const goalProgress = targetChange !== 0 ? Math.min(100, Math.abs(weightChange / targetChange) * 100) : 0;
            
            const calorieBalance = progressData.totalCaloriesConsumed - progressData.totalCaloriesBurned;
            
            document.getElementById('weight-progress').textContent = weightChange.toFixed(1);
            document.getElementById('calorie-balance').textContent = calorieBalance > 0 ? `+${calorieBalance}` : calorieBalance;
            document.getElementById('days-tracked').textContent = progressData.daysTracked;
            document.getElementById('goal-progress').textContent = `${Math.round(goalProgress)}%`;
            
            // Update progress bars
            document.getElementById('weight-progress-bar').style.width = `${Math.min(100, Math.abs(weightChange) * 10)}%`;
            document.getElementById('calorie-progress-bar').style.width = `${Math.min(100, Math.max(0, 50 + (calorieBalance / 100)))}%`;
            document.getElementById('goal-progress-bar').style.width = `${goalProgress}%`;
            
            // Color coding for weight progress
            const weightElement = document.getElementById('weight-progress');
            if (weightChange > 0) {
                weightElement.style.color = selectedGoal === 'weight-gain' ? '#4facfe' : '#ff6b6b';
            } else if (weightChange < 0) {
                weightElement.style.color = selectedGoal === 'weight-loss' ? '#4facfe' : '#ff6b6b';
            } else {
                weightElement.style.color = '#4facfe';
            }
            
            // Color coding for calorie balance
            const calorieElement = document.getElementById('calorie-balance');
            calorieElement.style.color = calorieBalance > 0 ? '#ff6b6b' : '#4facfe';
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Add smooth scrolling
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    this.style.animation = 'pulse 0.3s ease';
                    setTimeout(() => {
                        this.style.animation = '';
                    }, 300);
                });
            });
            
            // Add hover effects to cards
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Fix operator button handling for calculator
            document.querySelectorAll('.calc-btn.operator').forEach(btn => {
                if (!btn.textContent.includes('=')) {
                    btn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const op = this.textContent === '√ó' ? '*' : this.textContent;
                        
                        if (previousValue === null) {
                            previousValue = parseFloat(calcDisplay);
                        } else if (operation !== null && !waitingForNewValue) {
                            calculateResult();
                            previousValue = parseFloat(calcDisplay);
                        }
                        
                        operation = op;
                        waitingForNewValue = true;
                    });
                }
            });
        });
    </script>
</body>
</html>